#!/bin/sh

# Francesco Minnocci 2020
# A little script to use with dwm; can be easily changed by finding your specific /sys/class/backlight/***/brightness location, or symlinking the right one.
# See https://askubuntu.com/questions/715306/xbacklight-no-outputs-have-backlight-property-no-sys-class-backlight-folder
#
# The script changes the brightness by either prompting the user or using defaults;
# alternatively, it can be used with physical brightness increase/decrease buttons by passing the arguments `inc/dec $count` to the script, and assigning it to the keys through your DE/WM.

current=$(($(cat /sys/class/backlight/intel_backlight/brightness)/75))
default=4125
defaultu=6750
defaultd=1875

case "$1" in
	u*)
		valnorm="$(dmenu -p 'Input brightness [default: 90%]' )"
		[ -n "$valnorm" ] || val=$defaultu
	d*)
		valnorm="$(dmenu -p 'Input brightness [default: 25%]' )"
		[ -n "$valnorm" ] || val=$defaultd
	elif [ "$1" = "inc" ]; then
		valnorm="$((current+$2))"
	elif [ "$1" = "dec" ]; then
		valnorm="$((current-$2))"
	fi
	val="$((valnorm*75))"
else
	val="$default"
fi

echo $val | sudo tee /sys/class/backlight/intel_backlight/brightness

# Send notification
msgId="981141"
